diff --git a/BlitzDiffApp/app/auth/auth-utils.ts b/BlitzDiffApp/app/auth/auth-utils.ts
index f5a851738..df23a2808 100644
--- a/BlitzDiffApp/app/auth/auth-utils.ts
+++ b/BlitzDiffApp/app/auth/auth-utils.ts
@@ -2,15 +2,15 @@ import { AuthenticationError } from "blitz"
 import SecurePassword from "secure-password"
 import db from "db"
 
-const SP = () => new SecurePassword()
+const SP = new SecurePassword()
 
 export const hashPassword = async (password: string) => {
-  const hashedBuffer = await SP().hash(Buffer.from(password))
+  const hashedBuffer = await SP.hash(Buffer.from(password))
   return hashedBuffer.toString("base64")
 }
 export const verifyPassword = async (hashedPassword: string, password: string) => {
   try {
-    return await SP().verify(Buffer.from(password), Buffer.from(hashedPassword, "base64"))
+    return await SP.verify(Buffer.from(password), Buffer.from(hashedPassword, "base64"))
   } catch (error) {
     console.error(error)
     return false
diff --git a/BlitzDiffApp/app/hooks/useCurrentUser.ts b/BlitzDiffApp/app/hooks/useCurrentUser.ts
index 2938468c7..47ebaf5ee 100644
--- a/BlitzDiffApp/app/hooks/useCurrentUser.ts
+++ b/BlitzDiffApp/app/hooks/useCurrentUser.ts
@@ -1,7 +1,10 @@
-import { useQuery } from "blitz"
+import { useQuery, useSession } from "blitz"
 import getCurrentUser from "app/users/queries/getCurrentUser"
 
 export const useCurrentUser = () => {
-  const [user] = useQuery(getCurrentUser, null)
-  return user
+  // We wouldn't have to useSession() here, but doing so improves perf on initial
+  // load since we can skip the getCurrentUser() request.
+  const session = useSession()
+  const [user] = useQuery(getCurrentUser, null, { enabled: !!session.userId })
+  return session.userId ? user : null
 }
diff --git a/BlitzDiffApp/package.json b/BlitzDiffApp/package.json
index 30bce850d..fa6a8f436 100644
--- a/BlitzDiffApp/package.json
+++ b/BlitzDiffApp/package.json
@@ -31,9 +31,9 @@
     ]
   },
   "dependencies": {
-    "@prisma/cli": "2.x",
-    "@prisma/client": "2.x",
-    "blitz": "0.30.0-canary.15",
+    "@prisma/cli": "2.18.0",
+    "@prisma/client": "2.18.0",
+    "blitz": "0.31.1",
     "react": "0.0.0-experimental-4ead6b530",
     "react-dom": "0.0.0-experimental-4ead6b530",
     "react-error-boundary": "2.3.2",
@@ -50,7 +50,7 @@
     "@types/jest": "26.0.20",
     "@types/react": "16.14.4",
     "@types/secure-password": "3.1.0",
-    "@typescript-eslint/eslint-plugin": "4.x",
+    "@typescript-eslint/eslint-plugin": "4.16.1",
     "@typescript-eslint/parser": "4.16.1",
     "babel-eslint": "10.1.0",
     "eslint": "7.21.0",
